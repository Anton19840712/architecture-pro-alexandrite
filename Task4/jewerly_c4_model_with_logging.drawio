<mxfile host="app.diagrams.net" agent="Claude" version="22.1.0">
  <diagram name="C4 with Logging" id="logging-diagram">
    <mxGraphModel dx="1735" dy="1140" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1400" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- System Boundary -->
        <object placeholders="1" c4Name="Jewerly Store System" c4Type="SystemScopeBoundary" c4Application="Software System" label="&lt;font style=&quot;font-size: 16px&quot;&gt;&lt;b&gt;%c4Name%&lt;/b&gt;&lt;/font&gt;&lt;div&gt;[%c4Application%]&lt;/div&gt;" id="system-boundary">
          <mxCell style="rounded=1;fontSize=11;whiteSpace=wrap;html=1;dashed=1;arcSize=20;fillColor=none;strokeColor=#666666;fontColor=#333333;labelBackgroundColor=none;align=left;verticalAlign=bottom;spacing=10;dashPattern=8 4;" parent="1" vertex="1">
            <mxGeometry x="300" y="200" width="1250" height="1100" as="geometry" />
          </mxCell>
        </object>

        <!-- Persons -->
        <object placeholders="1" c4Name="Customer" c4Type="Person" c4Description="B2C customer" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Type%]&lt;/div&gt;" id="customer">
          <mxCell style="html=1;fontSize=11;dashed=0;whiteSpace=wrap;fillColor=#6C6477;strokeColor=#4D4D4D;fontColor=#ffffff;shape=mxgraph.c4.person2;align=center;" parent="1" vertex="1">
            <mxGeometry x="80" y="220" width="140" height="120" as="geometry" />
          </mxCell>
        </object>

        <object placeholders="1" c4Name="Seller" c4Type="Person" c4Description="CRM user" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Type%]&lt;/div&gt;" id="seller">
          <mxCell style="html=1;fontSize=11;dashed=0;whiteSpace=wrap;fillColor=#083F75;strokeColor=#06315C;fontColor=#ffffff;shape=mxgraph.c4.person2;align=center;" parent="1" vertex="1">
            <mxGeometry x="80" y="400" width="140" height="120" as="geometry" />
          </mxCell>
        </object>

        <object placeholders="1" c4Name="API User" c4Type="Person" c4Description="B2B partner" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Type%]&lt;/div&gt;" id="api-user">
          <mxCell style="html=1;fontSize=11;dashed=0;whiteSpace=wrap;fillColor=#6C6477;strokeColor=#4D4D4D;fontColor=#ffffff;shape=mxgraph.c4.person2;align=center;" parent="1" vertex="1">
            <mxGeometry x="80" y="580" width="140" height="120" as="geometry" />
          </mxCell>
        </object>

        <object placeholders="1" c4Name="Operator" c4Type="Person" c4Description="MES user" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Type%]&lt;/div&gt;" id="operator">
          <mxCell style="html=1;fontSize=11;dashed=0;whiteSpace=wrap;fillColor=#083F75;strokeColor=#06315C;fontColor=#ffffff;shape=mxgraph.c4.person2;align=center;" parent="1" vertex="1">
            <mxGeometry x="80" y="800" width="140" height="120" as="geometry" />
          </mxCell>
        </object>

        <!-- Frontend Containers -->
        <object placeholders="1" c4Name="Internet Shop" c4Type="Container" c4Technology="Vue" c4Description="Web frontend" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Technology%]&lt;/div&gt;" id="shop-frontend">
          <mxCell style="shape=mxgraph.c4.webBrowserContainer2;whiteSpace=wrap;html=1;boundedLbl=1;rounded=0;labelBackgroundColor=none;strokeColor=#118ACD;fillColor=#23A2D9;fontSize=11;fontColor=#ffffff;align=center;" parent="1" vertex="1">
            <mxGeometry x="340" y="230" width="160" height="100" as="geometry" />
          </mxCell>
        </object>

        <object placeholders="1" c4Name="CRM" c4Type="Container" c4Technology="Vue" c4Description="CRM frontend" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Technology%]&lt;/div&gt;" id="crm-frontend">
          <mxCell style="shape=mxgraph.c4.webBrowserContainer2;whiteSpace=wrap;html=1;boundedLbl=1;rounded=0;labelBackgroundColor=none;strokeColor=#118ACD;fillColor=#23A2D9;fontSize=11;fontColor=#ffffff;align=center;" parent="1" vertex="1">
            <mxGeometry x="340" y="410" width="160" height="100" as="geometry" />
          </mxCell>
        </object>

        <object placeholders="1" c4Name="MES" c4Type="Container" c4Technology="React" c4Description="MES frontend" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Technology%]&lt;/div&gt;" id="mes-frontend">
          <mxCell style="shape=mxgraph.c4.webBrowserContainer2;whiteSpace=wrap;html=1;boundedLbl=1;rounded=0;labelBackgroundColor=none;strokeColor=#118ACD;fillColor=#23A2D9;fontSize=11;fontColor=#ffffff;align=center;" parent="1" vertex="1">
            <mxGeometry x="340" y="810" width="160" height="100" as="geometry" />
          </mxCell>
        </object>

        <!-- Backend APIs -->
        <object placeholders="1" c4Name="Shop API" c4Type="Container" c4Technology="Spring Boot + Logback" c4Description="Shop backend with logging" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Technology%]&lt;/div&gt;" id="shop-api">
          <mxCell style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;labelBackgroundColor=none;fillColor=#23A2D9;fontColor=#ffffff;align=center;arcSize=10;strokeColor=#0E7DAD;" parent="1" vertex="1">
            <mxGeometry x="560" y="240" width="180" height="80" as="geometry" />
          </mxCell>
        </object>

        <object placeholders="1" c4Name="CRM API" c4Type="Container" c4Technology="Spring Boot + Logback" c4Description="CRM backend with logging" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Technology%]&lt;/div&gt;" id="crm-api">
          <mxCell style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;labelBackgroundColor=none;fillColor=#23A2D9;fontColor=#ffffff;align=center;arcSize=10;strokeColor=#0E7DAD;" parent="1" vertex="1">
            <mxGeometry x="560" y="420" width="180" height="80" as="geometry" />
          </mxCell>
        </object>

        <object placeholders="1" c4Name="MES API" c4Type="Container" c4Technology="C# + Serilog" c4Description="MES backend with logging" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Technology%]&lt;/div&gt;" id="mes-api">
          <mxCell style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;labelBackgroundColor=none;fillColor=#23A2D9;fontColor=#ffffff;align=center;arcSize=10;strokeColor=#0E7DAD;" parent="1" vertex="1">
            <mxGeometry x="560" y="640" width="180" height="80" as="geometry" />
          </mxCell>
        </object>

        <!-- Databases -->
        <object placeholders="1" c4Name="Shop DB" c4Type="Container" c4Technology="PostgreSQL" c4Description="+ slow query log" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Technology%]&lt;/div&gt;&lt;div&gt;%c4Description%&lt;/div&gt;" id="shop-db">
          <mxCell style="shape=cylinder3;size=15;whiteSpace=wrap;html=1;boundedLbl=1;rounded=0;labelBackgroundColor=none;fillColor=#23A2D9;fontSize=11;fontColor=#ffffff;align=center;strokeColor=#0E7DAD;" parent="1" vertex="1">
            <mxGeometry x="820" y="320" width="120" height="90" as="geometry" />
          </mxCell>
        </object>

        <object placeholders="1" c4Name="MES DB" c4Type="Container" c4Technology="PostgreSQL" c4Description="+ slow query log" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Technology%]&lt;/div&gt;&lt;div&gt;%c4Description%&lt;/div&gt;" id="mes-db">
          <mxCell style="shape=cylinder3;size=15;whiteSpace=wrap;html=1;boundedLbl=1;rounded=0;labelBackgroundColor=none;fillColor=#23A2D9;fontSize=11;fontColor=#ffffff;align=center;strokeColor=#0E7DAD;" parent="1" vertex="1">
            <mxGeometry x="820" y="630" width="120" height="90" as="geometry" />
          </mxCell>
        </object>

        <!-- RabbitMQ -->
        <object placeholders="1" c4Name="RabbitMQ" c4Type="Container" c4Technology="Message Broker" c4Description="+ server logs" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Technology%]&lt;/div&gt;&lt;div&gt;%c4Description%&lt;/div&gt;" id="rabbitmq">
          <mxCell style="shape=cylinder3;size=15;direction=south;whiteSpace=wrap;html=1;boundedLbl=1;rounded=0;labelBackgroundColor=none;fillColor=#23A2D9;fontSize=11;fontColor=#ffffff;align=center;strokeColor=#0E7DAD;" parent="1" vertex="1">
            <mxGeometry x="560" y="530" width="180" height="80" as="geometry" />
          </mxCell>
        </object>

        <!-- S3 Storage -->
        <object placeholders="1" c4Name="S3 Storage" c4Type="Container" c4Technology="S3" c4Description="3D files" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Technology%]&lt;/div&gt;" id="s3">
          <mxCell style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;labelBackgroundColor=none;fillColor=#23A2D9;fontColor=#ffffff;align=center;arcSize=10;strokeColor=#0E7DAD;" parent="1" vertex="1">
            <mxGeometry x="820" y="530" width="120" height="60" as="geometry" />
          </mxCell>
        </object>

        <!-- NEW: Logging Infrastructure (ORANGE) -->
        <object placeholders="1" c4Name="Fluent Bit" c4Type="Container" c4Technology="Log Collector" c4Description="Collects logs from all services" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Technology%]&lt;/div&gt;&lt;div&gt;%c4Description%&lt;/div&gt;" id="fluentbit">
          <mxCell style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;labelBackgroundColor=none;fillColor=#FF6600;fontColor=#ffffff;align=center;arcSize=10;strokeColor=#CC5500;" parent="1" vertex="1">
            <mxGeometry x="1050" y="450" width="180" height="80" as="geometry" />
          </mxCell>
        </object>

        <object placeholders="1" c4Name="OpenSearch" c4Type="Container" c4Technology="OpenSearch Cluster" c4Description="Log storage, indexing, search" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Technology%]&lt;/div&gt;&lt;div&gt;%c4Description%&lt;/div&gt;" id="opensearch">
          <mxCell style="shape=cylinder3;size=15;whiteSpace=wrap;html=1;boundedLbl=1;rounded=0;labelBackgroundColor=none;fillColor=#FF6600;fontSize=11;fontColor=#ffffff;align=center;strokeColor=#CC5500;" parent="1" vertex="1">
            <mxGeometry x="1050" y="580" width="180" height="100" as="geometry" />
          </mxCell>
        </object>

        <object placeholders="1" c4Name="OpenSearch Dashboards" c4Type="Container" c4Technology="Dashboards" c4Description="Search UI, visualizations, alerts" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Technology%]&lt;/div&gt;&lt;div&gt;%c4Description%&lt;/div&gt;" id="opensearch-dashboards">
          <mxCell style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;labelBackgroundColor=none;fillColor=#FF6600;fontColor=#ffffff;align=center;arcSize=10;strokeColor=#CC5500;" parent="1" vertex="1">
            <mxGeometry x="1050" y="730" width="180" height="80" as="geometry" />
          </mxCell>
        </object>

        <!-- Support Person -->
        <object placeholders="1" c4Name="Support / DevOps" c4Type="Person" c4Description="Log analysis" label="&lt;b&gt;%c4Name%&lt;/b&gt;&lt;div&gt;[%c4Type%]&lt;/div&gt;" id="support">
          <mxCell style="html=1;fontSize=11;dashed=0;whiteSpace=wrap;fillColor=#FF6600;strokeColor=#CC5500;fontColor=#ffffff;shape=mxgraph.c4.person2;align=center;" parent="1" vertex="1">
            <mxGeometry x="1300" y="710" width="140" height="120" as="geometry" />
          </mxCell>
        </object>

        <!-- Connections: Users to Frontends -->
        <mxCell id="edge-customer-shop" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" parent="1" source="customer" target="shop-frontend" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="edge-seller-crm" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" parent="1" source="seller" target="crm-frontend" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="edge-operator-mes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" parent="1" source="operator" target="mes-frontend" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="edge-apiuser-mesapi" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" parent="1" source="api-user" target="mes-api" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Connections: Frontends to APIs -->
        <mxCell id="edge-shopfe-shopapi" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" parent="1" source="shop-frontend" target="shop-api" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="edge-crmfe-crmapi" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" parent="1" source="crm-frontend" target="crm-api" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="edge-mesfe-mesapi" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" parent="1" source="mes-frontend" target="mes-api" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Connections: APIs to Databases -->
        <mxCell id="edge-shopapi-shopdb" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" parent="1" source="shop-api" target="shop-db" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="edge-crmapi-shopdb" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" parent="1" source="crm-api" target="shop-db" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="edge-mesapi-mesdb" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" parent="1" source="mes-api" target="mes-db" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Connections: APIs to RabbitMQ -->
        <mxCell id="edge-crmapi-rabbit" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;startArrow=classic;startFill=1;" parent="1" source="crm-api" target="rabbitmq" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="edge-mesapi-rabbit" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;startArrow=classic;startFill=1;" parent="1" source="mes-api" target="rabbitmq" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Connections: to S3 -->
        <mxCell id="edge-mesapi-s3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" parent="1" source="mes-api" target="s3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- NEW: Logging connections (ORANGE) -->
        <mxCell id="edge-shopapi-fb" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF6600;dashed=1;" parent="1" source="shop-api" target="fluentbit" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="990" y="280" />
              <mxPoint x="990" y="490" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-crmapi-fb" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF6600;dashed=1;" parent="1" source="crm-api" target="fluentbit" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="990" y="460" />
              <mxPoint x="990" y="490" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-mesapi-fb" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF6600;dashed=1;" parent="1" source="mes-api" target="fluentbit" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="990" y="680" />
              <mxPoint x="990" y="490" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-rabbit-fb" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF6600;dashed=1;" parent="1" source="rabbitmq" target="fluentbit" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="990" y="570" />
              <mxPoint x="990" y="490" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-shopdb-fb" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF6600;dashed=1;" parent="1" source="shop-db" target="fluentbit" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="990" y="365" />
              <mxPoint x="990" y="490" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-mesdb-fb" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF6600;dashed=1;" parent="1" source="mes-db" target="fluentbit" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="990" y="675" />
              <mxPoint x="990" y="490" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-fb-opensearch" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF6600;" parent="1" source="fluentbit" target="opensearch" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="edge-opensearch-dashboards" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF6600;" parent="1" source="opensearch" target="opensearch-dashboards" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="edge-dashboards-support" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF6600;" parent="1" source="opensearch-dashboards" target="support" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-box" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="1050" y="900" width="220" height="100" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="Legend" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="1050" y="905" width="220" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-existing" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#23A2D9;strokeColor=#0E7DAD;" parent="1" vertex="1">
          <mxGeometry x="1060" y="935" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-existing-text" value="Existing components" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1090" y="935" width="170" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-logging" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF6600;strokeColor=#CC5500;" parent="1" vertex="1">
          <mxGeometry x="1060" y="965" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-logging-text" value="NEW: Logging components" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#FF6600;" parent="1" vertex="1">
          <mxGeometry x="1090" y="965" width="170" height="20" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
